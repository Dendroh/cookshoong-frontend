<!DOCTYPE html>
<html data-bs-theme="light" lang="en" data-bss-forced-theme="light" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="/assets/vendors/typicons.font/font/typicons.css">
    <link rel="stylesheet" href="/assets/vendors/css/vendor.bundle.base.css">
    <link rel="stylesheet" href="/assets/css/vertical-layout-light/style.css">
    <link rel="stylesheet" href="/assets/css/vertical-layout-light/custom.css">
    <link rel="stylesheet" href="/assets/css/validation.css">
    <link rel="shortcut icon" href="/assets/images/favicon.png"/>

    <script src="/assets/js/form-validation.js"></script>
    <script src="/assets/js/account/validation.js"></script>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=55b38bb80852c12b35f14456e76868a9&libraries=services"></script>
</head>

<body>
<div class="container-scroller">
    <div class="container-fluid page-body-wrapper full-page-wrapper">
        <div class="content-wrapper d-flex align-items-center auth px-0">
            <div class="row w-100 mx-0">
                <div class="col-lg-4 mx-auto">
                    <div class="auth-form-light text-left py-5 px-4 px-sm-5">
                        <div class="brand-logo">
                            <a th:href="@{/}">
                                <img src="/assets/images/shoong_orange.png" alt="logo">
                            </a>
                        </div>
                        <form class="pt-3 needs-validation" id="signUpForm"
                              th:action="@{/sign-up(userType=${userType})}" th:object="${signUpRequestDto}"
                              method="post">
                            <div class="form-group">
                                <div class="flex-container">
                                    <input data-checked="false" type="text" class="form-control form-control-lg flex-1"
                                           th:field="*{loginId}" placeholder="아이디" required>
                                    <button class="btn btn-outline-warning" onclick="checkExists()" type="button">
                                        중복확인
                                    </button>
                                </div>
                                <p class="error-message" style="display: none" id="login-duplicate-msg"></p>
                            </div>
                            <div class="form-group">
                                <input data-checked="false" type="password" class="form-control form-control-lg"
                                       id="password" minlength="4"
                                       th:field="*{password}" placeholder="비밀번호" required>
                                <p class="error-message" th:if="${#fields.hasErrors('password')}"
                                   th:errors="*{password}"></p>
                                <input type="password" class="form-control form-control-lg" id="password-check"
                                       placeholder="비밀번호 확인" required>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control form-control-lg" minlength="2" maxlength="30"
                                       th:field="*{name}" placeholder="이름" oninput="makeLetterOnly('name')" required>
                                <p class="error-message" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></p>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control form-control-lg" id="nickname"
                                       name="nickname" minlength="1" maxlength="30"
                                       th:field="*{nickname}" th:value="*{nickname}" placeholder="닉네임 (30글자 이내)"
                                       required>
                                <p class="error-message" th:if="${#fields.hasErrors('nickname')}"
                                   th:errors="*{nickname}"></p>
                            </div>
                            <div class="form-group">
                                <input type="email" class="form-control form-control-lg" id="email"
                                       name="email"
                                       th:field="*{email}" th:value="*{email}" placeholder="you@example.com" required>
                                <p class="error-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
                            </div>
                            <div class="form-group">
                                <input type="date" class="form-control form-control-lg" id="birthday"
                                       name="birthday"
                                       th:field="*{birthday}" th:value="*{birthday}" placeholder="생년월일" required>
                                <p class="error-message" th:if="${#fields.hasErrors('birthday')}"
                                   th:errors="*{birthday}"></p>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control form-control-lg" id="phoneNumber"
                                       name="phoneNumber" th:field="*{phoneNumber}" th:value="*{phoneNumber}"
                                       minlength="11" maxlength="11" pattern="^010[0-9]{8}$"
                                       title="'-'를 제외한 휴대폰번호 11자리를 입력해주세요."
                                       placeholder="전화번호 ('-' 제외)" oninput="makeNumberOnly('phoneNumber')" required>
                                <p class="error-message" th:if="${#fields.hasErrors('phoneNumber')}"
                                   th:errors="*{phoneNumber}"></p>
                            </div>
                            <div class="form-group">
                                <div class="flex-container">
                                    <input type="text" class="form-control form-control-lg flex-1"
                                           id="mainPlace" name="createAccountAddressRequestDto.mainPlace"
                                           th:field="*{createAccountAddressRequestDto.mainPlace}" placeholder="메인 주소"
                                           readonly required>
                                    <button class="btn btn-outline-warning" onclick="execDaumPostcode()" type="button">
                                        주소 검색
                                    </button>
                                </div>
                                <p class="error-message"
                                   th:if="${#fields.hasErrors('createAccountAddressRequestDto.mainPlace')}"
                                   th:errors="*{createAccountAddressRequestDto.mainPlace}"></p>
                            </div>
                            <div class="form-group">
                                <input class="form-control form-control-lg" type="text" id="detailPlace"
                                       name="createAccountAddressRequestDto.detailPlace"
                                       th:field="*{createAccountAddressRequestDto.detailPlace}"
                                       placeholder="서브 주소"
                                       required>
                                <p class="error-message"
                                   th:if="${#fields.hasErrors('createAccountAddressRequestDto.detailPlace')}"
                                   th:errors="*{createAccountAddressRequestDto.detailPlace}"></p>
                            </div>
                            <div class="form-group">
                                <input class="form-control form-control-lg" type="text" id="alias"
                                       name="createAccountAddressRequestDto.alias"
                                       th:field="*{createAccountAddressRequestDto.alias}"
                                       placeholder="주소 별칭" minlength="1" required>
                                <p class="error-message"
                                   th:if="${#fields.hasErrors('createAccountAddressRequestDto.alias')}"
                                   th:errors="*{createAccountAddressRequestDto.alias}"></p>
                            </div>
                            <input type="hidden" id="latitude" name="createAccountAddressRequestDto.latitude"
                                   th:field="*{createAccountAddressRequestDto.latitude}">
                            <input type="hidden" id="longitude" name="createAccountAddressRequestDto.longitude"
                                   th:field="*{createAccountAddressRequestDto.longitude}">
                            <div class="mt-3">
                                <button disabled
                                        class="btn btn-block btn-warning btn-lg font-weight-medium auth-form-btn sign-up-btn"
                                        type="submit" id="sign-up-btn">SIGN UP
                                </button>
                            </div>
                            <div class="text-center mt-4 font-weight-normal">
                                Already have an account? <a th:href="@{/login-page}" class="text-warning">Login</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/assets/vendors/js/vendor.bundle.base.js"></script>
<script src="/assets/js/off-canvas.js"></script>
<script src="/assets/js/hoverable-collapse.js"></script>
<script src="/assets/js/template.js"></script>
<script src="/assets/js/settings.js"></script>
<script src="/assets/js/todolist.js"></script>
<script src="/assets/js/account/account.js"></script>
<script src="/assets/js/account/validation.js"></script>
<script>
    const geocoder = new daum.maps.services.Geocoder();

    function execDaumPostcode() {
        new daum.Postcode({
            oncomplete: function (data) {
                document.getElementById("mainPlace").value = data.address;
                geocoder.addressSearch(data.address, function (results, status) {
                    if (status === daum.maps.services.Status.OK) {
                        const result = results[0];
                        const lat = result.y;
                        const lng = result.x;
                        document.getElementById("latitude").value = lat;
                        document.getElementById("longitude").value = lng;
                    }
                });
            }
        }).open();
    }
</script>
</body>

</html>
